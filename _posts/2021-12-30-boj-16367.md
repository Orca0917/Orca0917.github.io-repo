---
title:  "[C++] ë°±ì¤€ 16367: TV Show Game"
excerpt: "í”Œë˜í‹°ë„˜ â…¢"

categories:
  - boj
tags:
  - [C++, ì•Œê³ ë¦¬ì¦˜, ê·¸ë˜í”„ ì´ë¡ , ê°•í•œ ì—°ê²° ìš”ì†Œ, 2-SAT]
toc: true
toc_sticky: true
 
date: 2021-12-30
last_modified_at: 2021-12-30
---
ğŸ“Œ **ì•Œë¦½ë‹ˆë‹¤!**<br>
ë¬¸ì œ ë‚œì´ë„ì˜ ë¶„ë¥˜ì™€ ì¶œì²˜ëŠ” BOJì™€ Solved.acì— ìˆìŠµë‹ˆë‹¤.
{: .notice--info}

# 1. ë¬¸ì œ ì¶œì²˜
[<img src="https://static.solved.ac/tier_small/18.svg" style="width: 1em"> ë°±ì¤€_16367_TV Show Game](https://www.acmicpc.net/problem/16367)

<br>

# 2. ë¬¸ì œ í•´ì„¤ & ë¶„ë¥˜
ì–´ë–¤ ëŒ€íšŒì—ì„œ ì „êµ¬ì˜ ìƒ‰ìƒì„ ë§ì¶”ëŠ” ëŒ€íšŒê°€ ìˆë‹¤. ê° ì°¸ê°€ìë“¤ì€ 3ê°œì˜ ì „êµ¬ë¥¼ ì„ íƒí•˜ì—¬, ê·¸ ì „êµ¬ì— ë¶ˆì´ ë“¤ì–´ì™”ì„ ë•Œ ë“¤ì–´ì˜¤ëŠ” ìƒ‰ìƒì„ ë§ì¶°ì•¼ í•œë‹¤. ì–´ë–¤ ì°¸ê°€ìê°€ ê·¸ ëŒ€íšŒì—ì„œ ìš°ìŠ¹í•˜ëŠ” ì¡°ê±´ì€ ì„ íƒí•œ ì „êµ¬ 3ê°œ ì¤‘ 2ê°œ ì´ìƒì„ ë§ì¶”ëŠ” ê²ƒì´ë‹¤. ëª¨ë“  ì°¸ê°€ìê°€ ëŒ€íšŒì—ì„œ ìš°ìŠ¹í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì „êµ¬ì˜ ìƒ‰ì„ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤. ëª¨ë“  ì°¸ê°€ìê°€ ìš°ìŠ¹í•  ìˆ˜ ì—†ë‹¤ë©´, -1ì„ ì¶œë ¥í•œë‹¤.

ê·¸ ë™ì•ˆ ë´ì™”ë˜ ì¼ë°˜ì ì¸ `2-SAT`ì™€ ë‹¤ë¥´ê²Œ, ê° ì°¸ê°€ìëŠ” 2ê°œê°€ ì•„ë‹Œ, 3ê°œì˜ ì „êµ¬ë¥¼ ì„ íƒí•˜ì˜€ë‹¤. ìš°ìŠ¹í•˜ê¸° ìœ„í•´ì„œëŠ” 2ê°œ ì´ìƒ ë§ì¶°ì•¼ í•˜ë©° ê° ì „êµ¬ì—ëŠ” **RED** ë˜ëŠ” **BLUE**ì˜ ìƒ‰ìƒë§Œ ì£¼ì–´ì§„ë‹¤. ìœ„ì˜ ì¡°ê±´ì„ ë³´ê³  2-SATë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

> 1ë²ˆì§¸ ì „êµ¬ ìƒ‰ìƒì„ ë§ì¶”ì§€ ëª»í–ˆë‹¤ë©´, 2ë²ˆì§¸, 3ë²ˆì§¸ ì „êµ¬ì˜ ìƒ‰ìƒì€ ë°˜ë“œì‹œ ë§ì•„ì•¼í•œë‹¤.

\begin{aligned}
    \neg x_1 \Rightarrow x2 \\\\\\
    \neg x_1 \Rightarrow x3
\end{aligned}

ìœ„ì™€ ê°™ì€ ì‹ìœ¼ë¡œ 2ë²ˆì§¸ ì „êµ¬, 3ë²ˆì§¸ ì „êµ¬ì— ëŒ€í•´ì„œë„ ë™ì¼í•˜ê²Œ ìˆ˜í–‰í•œë‹¤. <u>ì „êµ¬ì— ë“¤ì–´ì˜¤ëŠ” ìƒ‰ìƒì€ ë¹¨ê°„ìƒ‰, íŒŒë€ìƒ‰ ì¤‘ í•˜ë‚˜ì´ë¯€ë¡œ í•˜ë‚˜ë¥¼ True, ë‹¤ë¥¸ í•˜ë‚˜ë¥¼ Falseë¡œ ìƒê°í•˜ì—¬ 2-SATë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ ëœë‹¤.</u>

ë¹¨ê°„ìƒ‰ì„ `False`ë¼ê³  ìƒê°í•œë‹¤ë©´, ê¸°ì¡´ì— í•´ì™”ë˜ ë¬¸ì œë“¤ ì²˜ëŸ¼, ìŒìˆ˜ë¥¼ ì·¨í•˜ì—¬ êµ¬ë¶„ì„ í•œë‹¤. ì´í›„, ê·¸ë˜í”„ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ì„ ì´ìš©í•œë‹¤. 

- true : \\(2 \times x\\)
- false : \\(2 \times x + 1 \\)

```cpp
auto getNode = [](int x) -> pii {
    int notx;

    if (x < 0) {
        x = -x * 2 + 1;
        notx = x - 1;
    } else {
        x = x * 2;
        notx = x + 1;
    }

    return {x, notx};
};
```

`tarjan ì•Œê³ ë¦¬ì¦˜`ì„ ì‚¬ìš©í•˜ì—¬ ê°™ì€ SCCë¼ë¦¬ ë¬¶ê³ , 2-SATë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ, **ê°™ì€ \\(x\\) ì— ëŒ€í•´ì„œëŠ” ë™ì¼í•œ SCCì— ì¡´ì¬í•˜ë©´ ì•ˆë˜**ë¯€ë¡œ í•´ë‹¹ ë¶€ë¶„ì„ ê±¸ëŸ¬ë‚¸ë‹¤. ì´í›„, ì–´ë–¤ ìƒ‰ìƒì„ ë¶€ì—¬í• ì§€ ê²°ì •í•˜ë©´ ëœë‹¤.

ë¶„ë¥˜: `ê·¸ë˜í”„ ì´ë¡ `, `ê°•í•œ ì—°ê²° ìš”ì†Œ`, `2-sat`

<br>

# 3. ì •ë‹µ ì½”ë“œ

~~~cpp
#include <bits/stdc++.h>
#define ll long long
#define pii pair<int, int>

using namespace std;

int n, m;
vector<int> adj[10005];
vector<int> discovered(10005, -1), sccid(10005, -1);
stack<int> st;
int disnum = 0, sccnum = 0;

int scc(int here) {
    int ret = discovered[here] = disnum++;
    st.push(here);

    for (int there : adj[here]) {
        if (discovered[there] == -1)
            ret = min(ret, scc(there));
        else if (sccid[there] == -1)
            ret = min(ret, discovered[there]);
    }

    if (ret == discovered[here]) {
        while (true) {
            int x = st.top(); st.pop();
            sccid[x] = sccnum;
            if (here == x) break;
        }
        ++sccnum;
    }

    return ret;
}

bool tarjanSCC() {
    for (int i = 2; i <= 2 * n + 1; ++i) {
        if (discovered[i] == -1) 
            scc(i);
    }

    for (int i = 2; i <= 2 * n; i += 2) {
        if (sccid[i] == sccid[i + 1]) {
            return false;
        }
    }

    return true;
}

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(nullptr);
    cout.tie(nullptr);
    
    cin >> n >> m;

    vector<int> selected(3);
    vector<char> color(3);

    for (int i = 0; i < m; ++i) {

        for (int j = 0; j < 3; ++j) {
            cin >> selected[j] >> color[j];
            if (color[j] == 'R') selected[j] = -selected[j];
        }

        auto getNode = [](int x) -> pii {
            int notx;

            if (x < 0) {
                x = -x * 2 + 1;
                notx = x - 1;
            } else {
                x = x * 2;
                notx = x + 1;
            }

            return {x, notx};
        };

        pii s1 = getNode(selected[0]);
        pii s2 = getNode(selected[1]);
        pii s3 = getNode(selected[2]);

        adj[s1.second].push_back(s2.first);
        adj[s1.second].push_back(s3.first);

        adj[s2.second].push_back(s1.first);
        adj[s2.second].push_back(s3.first);

        adj[s3.second].push_back(s1.first);
        adj[s3.second].push_back(s2.first);

    }

    bool result = tarjanSCC();

    if (result) {
        vector<int> value(2 * n + 2, -1);
        vector<pii> order;
        for (int i = 1; i <= 2 * n + 1; ++i)
            order.push_back({-sccid[i], i});
        sort(order.begin(), order.end());

        for (int i = 0; i <= order.size(); ++i) {
            int vertex = order[i].second;
            int var = vertex / 2;
            bool isTrue = vertex % 2 == 0;
            if (value[var] != -1) continue;
            value[var] = !isTrue;
        }

        for (int i = 1; i <= n; ++i) {
            if (value[i] == 0) cout << 'R';
            else cout << 'B';
        }
        cout << "\n";
    } else {
        cout << "-1\n";
    }

    return 0;
}
~~~